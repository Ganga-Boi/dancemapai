<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>DanceMap</title>

  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#6366f1" />

  <!-- API config (UÆNDRET) -->
  <script src="/api-config.js"></script>

  <!-- ADMIN UI (NYT – påvirker ikke frontend) -->
  <link rel="stylesheet" href="/admin.css" />

  <!-- resten af <head> er UÆNDRET -->
</head>

<body>

<!-- ============================= -->
<!-- DIN EKSISTERENDE HTML -->
<!-- (ALT ER UÆNDRET HER) -->
<!-- ============================= -->

<!-- fx chat UI, søgefelt, resultater osv. -->


<!-- ============================= -->
<!-- ADMIN UI MODAL (NY) -->
<!-- ============================= -->

<div id="admin-root" style="display:none"></div>

<!-- ============================= -->
<!-- EKSISTERENDE SCRIPT -->
<!-- ============================= -->

<script>
/* ========= ENESTE ÆNDRING: API ========= */

const API = window.DANCEMAP_API.search;

/* ========= RESTEN AF SCRIPTET ER IDENTISK ========= */

async function search(q) {
  const res = await fetch(API + '?query=' + encodeURIComponent(q), { cache: 'no-store' });
  const data = await res.json();
  return data;
}

/* week count */
async function loadWeekCount() {
  try {
    const res = await fetch(window.DANCEMAP_API.weekcount, { cache: 'no-store' });
    const data = await res.json();
    if (data.success && data.count > 0) {
      document.getElementById('weekCount').textContent =
        data.count + ' events denne uge';
    }
  } catch {}
}

loadWeekCount();

/* resten af din eksisterende JS er UÆNDRET */
</script>

<!-- ============================= -->
<!-- ADMIN SCRIPT (NY) -->
<!-- ============================= -->

<script src="/admin.js"></script>

<!-- ============================= -->
<!-- ADMIN TOGGLE (VALGFRI, TIL DIG) -->
<!-- ============================= -->

<script>
/*
  Åbn admin manuelt i browser:
  skriv i console: openAdmin()
*/

function openAdmin() {
  document.getElementById('admin-root').style.display = 'block';
  console.log('Admin UI åbnet');
}
</script>

</body>
</html>
