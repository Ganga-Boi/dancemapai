<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DanceMap Admin</title>
<style>
body { font-family: Arial, sans-serif; background:#0f0f23; color:#fff; padding:20px }
.container { max-width:800px; margin:auto }
textarea,input,select,button { width:100%; padding:10px; margin:6px 0 }
button { background:#667eea; color:#fff; border:0; cursor:pointer }
.alert { margin:10px 0; padding:10px }
.success { color:#48bb78 }
.error { color:#fc8181 }
</style>
</head>
<body>

<div class="container">
<h2>DanceMap – Admin Import</h2>

<p><b>Indsæt tekst fra Facebook / opslag</b></p>
<textarea id="raw" rows="8"
placeholder="Fx:
Onsdag 16. januar
Salsa Jam
20:30–02:00
Kulturhuset Islands Brygge
50 kr"></textarea>

<button onclick="send()">Indsend event</button>

<div id="msg"></div>
</div>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbxnZiO0bDkCrrwGJXwAvA5mWKPBoQoL-t1smx5m0A5j51gSbTOtF1MLT3qkdwbZkTX_/exec";

function send() {
  const text = document.getElementById('raw').value.trim();
  if (!text) {
    show("Indsæt tekst først", "error");
    return;
  }

  const cb = "cb_" + Date.now();
  window[cb] = r => {
    delete window[cb];
    if (r.success) {
      show("✅ Event indsendt (pending)", "success");
      document.getElementById('raw').value = "";
    } else {
      show("❌ " + (r.text || "Fejl"), "error");
    }
  };

  const params = new URLSearchParams({
    action: "admin-import",
    payload: text,
    recurring: "false",
    callback: cb
  });

  const s = document.createElement("script");
  s.src = SCRIPT_URL + "?" + params.toString();
  document.body.appendChild(s);
}

function show(t, c) {
  const el = document.getElementById("msg");
  el.className = "alert " + c;
  el.textContent = t;
}
</script>

</body>
</html>
